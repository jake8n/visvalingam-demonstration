<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Visvalingam demonstration</title>
    <style>
      html {
        color: #111;
        font-family: sans-serif;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <h1>Visvalingam demonstration</h1>
      <h2>canvas width <span id="canvas-width"></span> pixels</h2>
      <h2># points <span id="points-length"></span></h2>
      <canvas width="720" height="360" id="canvas"></canvas>
    </div>

    <script type="module">
      import aapl from './public/aapl.js'
      import { simplify } from './public/simplify.js'
      import { clearCanvas, useChart } from './public/chart.js'

      const canvas = document.querySelector('#canvas')
      const canvasWidthEl = document.querySelector('#canvas-width')
      const pointsLengthEl = document.querySelector('#points-length')

      const stocks = simplify(aapl, aapl.length - canvas.width)
      useChart(canvas, stocks)

      canvasWidthEl.innerHTML = canvas.width
      pointsLengthEl.innerHTML = stocks.length
    </script>
  </body>
</html>
